<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trucking Insurance Quick Quote Sheet</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .section {
            border-bottom: 3px solid #e9ecef;
            padding: 0;
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        .section-header {
            background: #f1f3f4;
            padding: 15px 20px;
            border-left: 4px solid #3498db;
            margin: 0;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-content {
            padding: 20px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        label {
            font-weight: 600;
            color: #495057;
            font-size: 14px;
        }
        
        input, select, textarea {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin: 0;
            transform: scale(1.2);
        }
        
        .coverage-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .coverage-item {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            background: #f8f9fa;
            transition: border-color 0.2s;
        }
        
        .coverage-item:has(input[type="checkbox"]:checked) {
            border-color: #3498db;
            background: #f0f8ff;
        }
        
        .coverage-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .coverage-item:has(input[type="checkbox"]:checked) .coverage-details {
            display: grid;
        }
        
        .notes {
            font-size: 12px;
            color: #6c757d;
            font-style: italic;
            margin-top: 5px;
        }
        
        .save-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px;
            transition: transform 0.2s;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
        }
        
        .remove-btn {
            background: #e74c3c;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            margin-top: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .remove-btn:hover {
            background: #c0392b;
        }
        
        .add-btn {
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            margin-top: 15px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .add-btn:hover {
            background: #219a52;
        }
        
        .driver-entry, .vehicle-entry {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f8f9fa;
        }
        
        .driver-entry:first-child, .vehicle-entry:first-child {
            background: white;
        }
        
        .required {
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöõ Trucking Insurance Quick Quote Sheet üíº</h1>
            <p>Enhanced for >80K Heavy-Duty Operations</p>
        </div>
        
        <div class="section">
            <h2 class="section-header">üìã 1. Business & Regulatory Information</h2>
            <div class="section-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Business Name <span class="required">*</span></label>
                        <input type="text" placeholder="Legal name of insured">
                        <div class="notes">Legal name of insured</div>
                    </div>
                    <div class="form-group">
                        <label>Contact Name <span class="required">*</span></label>
                        <input type="text" placeholder="Primary contact">
                    </div>
                    <div class="form-group">
                        <label>Phone Number <span class="required">*</span></label>
                        <input type="tel" placeholder="(000) 000-0000">
                    </div>
                    <div class="form-group">
                        <label>Email Address <span class="required">*</span></label>
                        <input type="email" placeholder="email@company.com">
                    </div>
                    <div class="form-group">
                        <label>USDOT# <span class="required">*</span></label>
                        <input type="text" placeholder="DOT Number">
                    </div>
                    <div class="form-group">
                        <label>MC# <span class="required">*</span></label>
                        <input type="text" placeholder="MC Number">
                    </div>
                    <div class="form-group">
                        <label>FEIN</label>
                        <input type="text" placeholder="Federal EIN">
                    </div>
                    <div class="form-group">
                        <label>State Permit#</label>
                        <input type="text" placeholder="State permit number">
                        <div class="notes">Replaces CA#</div>
                    </div>
                    <div class="form-group">
                        <label>Agency Number <span class="required">*</span></label>
                        <input type="text" placeholder="Agency reference number">
                        <div class="notes">Internal agency tracking number</div>
                    </div>
                    <div class="form-group">
                        <label>Years in Business <span class="required">*</span></label>
                        <select>
                            <option value="">Select...</option>
                            <option value="<1">Less than 1 year</option>
                            <option value="1-3">1-3 years</option>
                            <option value="4-7">4-7 years</option>
                            <option value="8+">8+ years</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üë®‚Äçüíº 2. Driver Information</h2>
            <div class="section-content">
                <div id="drivers-container">
                    <div class="driver-entry" data-driver="1">
                        <h3 style="color: #3498db; margin-bottom: 15px;">Driver #1</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Driver Name <span class="required">*</span></label>
                                <input type="text" placeholder="Full name" name="driver_1_name">
                            </div>
                            <div class="form-group">
                                <label>License State & Number <span class="required">*</span></label>
                                <input type="text" placeholder="CA - D1234567" name="driver_1_license">
                            </div>
                            <div class="form-group">
                                <label>Date of Hire</label>
                                <input type="date" name="driver_1_hire_date">
                            </div>
                            <div class="form-group">
                                <label>Years of Experience <span class="required">*</span></label>
                                <select name="driver_1_experience">
                                    <option value="">Select...</option>
                                    <option value="<1">Less than 1 year</option>
                                    <option value="1-3">1-3 years</option>
                                    <option value="4-7">4-7 years</option>
                                    <option value="8+">8+ years</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label>Accidents/Violations (Last 3 Years)</label>
                                <textarea rows="3" placeholder="Summary or attach loss runs" name="driver_1_violations"></textarea>
                                <div class="notes">Summary or attach loss runs</div>
                            </div>
                        </div>
                        <button type="button" class="remove-btn" onclick="removeDriver(1)" style="background: #e74c3c; color: white; padding: 8px 15px; border: none; border-radius: 4px; margin-top: 10px; display: none;">Remove Driver #1</button>
                    </div>
                </div>
                <button type="button" onclick="addDriver()" class="add-btn">+ Add Another Driver</button>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üöö 3. Vehicle & Trailer Details</h2>
            <div class="section-content">
                <div id="vehicles-container">
                    <div class="vehicle-entry" data-vehicle="1">
                        <h3 style="color: #3498db; margin-bottom: 15px;">Vehicle #1</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Unit #</label>
                                <input type="text" placeholder="Internal reference number" name="vehicle_1_unit">
                                <div class="notes">Internal reference</div>
                            </div>
                            <div class="form-group">
                                <label>Year/Make/Model <span class="required">*</span></label>
                                <input type="text" placeholder="2020 Freightliner Cascadia" name="vehicle_1_make_model">
                            </div>
                            <div class="form-group">
                                <label>VIN <span class="required">*</span></label>
                                <input type="text" placeholder="17-digit VIN" name="vehicle_1_vin">
                            </div>
                            <div class="form-group">
                                <label>GVW/GCW <span class="required">*</span></label>
                                <select name="vehicle_1_gvw">
                                    <option value=">80,000">More than 80,000 lbs</option>
                                    <option value="60,001-80,000">60,001-80,000 lbs</option>
                                    <option value="40,001-60,000">40,001-60,000 lbs</option>
                                    <option value="26,001-40,000">26,001-40,000 lbs</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Radius of Operation <span class="required">*</span></label>
                                <select name="vehicle_1_radius">
                                    <option value="">Select...</option>
                                    <option value="0-100">0-100 miles</option>
                                    <option value="101-300">101-300 miles</option>
                                    <option value="301-500">301-500 miles</option>
                                    <option value="500+">500+ miles</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ELD Manufacturer</label>
                                <select name="vehicle_1_eld">
                                    <option value="">Select...</option>
                                    <option value="KeepTruckin">KeepTruckin</option>
                                    <option value="Samsara">Samsara</option>
                                    <option value="Omnitracs">Omnitracs</option>
                                    <option value="PeopleNet">PeopleNet</option>
                                    <option value="Fleet Complete">Fleet Complete</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label>Additional Options</label>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="trailer-interchange-1" name="vehicle_1_trailer_interchange">
                                        <label for="trailer-interchange-1">Trailer Interchange Coverage</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="remove-btn" onclick="removeVehicle(1)" style="background: #e74c3c; color: white; padding: 8px 15px; border: none; border-radius: 4px; margin-top: 10px; display: none;">Remove Vehicle #1</button>
                    </div>
                </div>
                <button type="button" onclick="addVehicle()" class="add-btn">+ Add Another Vehicle</button>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üì¶ 4. Commodities & Cargo</h2>
            <div class="section-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Commodity Type <span class="required">*</span></label>
                        <select>
                            <option value="">Select...</option>
                            <option value="General Freight">General Freight</option>
                            <option value="Auto Hauler">Auto Hauler</option>
                            <option value="Refrigerated">Refrigerated</option>
                            <option value="Flatbed">Flatbed</option>
                            <option value="Hazmat">Hazmat</option>
                            <option value="Tanker">Tanker</option>
                            <option value="Heavy Haul">Heavy Haul</option>
                            <option value="Container">Container</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>% of Loads</label>
                        <input type="text" placeholder="e.g., 80%">
                    </div>
                    <div class="form-group">
                        <label>Average Cargo Value</label>
                        <input type="text" placeholder="$50,000">
                    </div>
                    <div class="form-group">
                        <label>Maximum Cargo Value</label>
                        <input type="text" placeholder="$100,000">
                    </div>
                    <div class="form-group full-width">
                        <label>Special Coverage Needed</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="refrigeration">
                                <label for="refrigeration">Refrigeration Coverage</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üìä 5. Insurance History</h2>
            <div class="section-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Prior Carrier(s)</label>
                        <input type="text" placeholder="Last 3 years">
                        <div class="notes">Last 3 years</div>
                    </div>
                    <div class="form-group">
                        <label>Loss Runs Status</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="loss-runs-yes">
                                <label for="loss-runs-yes">Loss Runs Available</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="loss-runs-no">
                                <label for="loss-runs-no">Loss Runs Not Available</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label>Claims Description</label>
                        <textarea rows="3" placeholder="Brief summary of any claims"></textarea>
                        <div class="notes">Brief summary</div>
                    </div>
                    <div class="form-group full-width">
                        <label>Policy Issues</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="non-renewal">
                                <label for="non-renewal">Non-Renewal</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="cancellation">
                                <label for="cancellation">Cancellation</label>
                            </div>
                        </div>
                        <input type="text" placeholder="Reason (if applicable)" style="margin-top: 10px;">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üõ°Ô∏è 6. Coverage Options & Limits</h2>
            <div class="section-content">
                <div class="coverage-grid">
                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="primary-liability">
                            <label for="primary-liability"><strong>Primary Liability</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>Liability Limit</label>
                                <select name="primary_liability_limit">
                                    <option value="">Select limit...</option>
                                    <option value="$750,000">$750,000</option>
                                    <option value="$1,000,000">$1,000,000</option>
                                    <option value="$2,000,000">$2,000,000</option>
                                    <option value="$5,000,000">$5,000,000</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Custom Limit (if other)</label>
                                <input type="text" placeholder="$____" name="primary_liability_custom">
                            </div>
                        </div>
                    </div>

                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="non-trucking">
                            <label for="non-trucking"><strong>Non-Trucking Liability</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>NTL Limit</label>
                                <select name="ntl_limit">
                                    <option value="">Select limit...</option>
                                    <option value="$1,000,000">$1,000,000</option>
                                    <option value="$2,000,000">$2,000,000</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Custom Limit (if other)</label>
                                <input type="text" placeholder="$____" name="ntl_custom">
                            </div>
                        </div>
                    </div>

                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="physical-damage">
                            <label for="physical-damage"><strong>Physical Damage</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>Comprehensive Deductible</label>
                                <select name="comp_deductible">
                                    <option value="">Select deductible...</option>
                                    <option value="$1,000">$1,000</option>
                                    <option value="$2,500">$2,500</option>
                                    <option value="$5,000">$5,000</option>
                                    <option value="$10,000">$10,000</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Collision Deductible</label>
                                <select name="collision_deductible">
                                    <option value="">Select deductible...</option>
                                    <option value="$1,000">$1,000</option>
                                    <option value="$2,500">$2,500</option>
                                    <option value="$5,000">$5,000</option>
                                    <option value="$10,000">$10,000</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="cargo-coverage">
                            <label for="cargo-coverage"><strong>Cargo Coverage</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>Cargo Limit</label>
                                <select name="cargo_limit">
                                    <option value="">Select limit...</option>
                                    <option value="$50,000">$50,000</option>
                                    <option value="$100,000">$100,000</option>
                                    <option value="$250,000">$250,000</option>
                                    <option value="$500,000">$500,000</option>
                                    <option value="$1,000,000">$1,000,000</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Cargo Deductible</label>
                                <select name="cargo_deductible">
                                    <option value="">Select deductible...</option>
                                    <option value="$1,000">$1,000</option>
                                    <option value="$2,500">$2,500</option>
                                    <option value="$5,000">$5,000</option>
                                    <option value="$10,000">$10,000</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Custom Limit (if other)</label>
                                <input type="text" placeholder="$____" name="cargo_custom">
                            </div>
                        </div>
                    </div>

                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="general-liability">
                            <label for="general-liability"><strong>General Liability</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>GL Limit</label>
                                <select name="gl_limit">
                                    <option value="">Select limit...</option>
                                    <option value="$1,000,000">$1,000,000</option>
                                    <option value="$2,000,000">$2,000,000</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Custom Limit (if other)</label>
                                <input type="text" placeholder="$____" name="gl_custom">
                            </div>
                        </div>
                    </div>

                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="hired-non-owned">
                            <label for="hired-non-owned"><strong>Hired/Non-Owned Auto</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>H/NO Limit</label>
                                <select name="hno_limit">
                                    <option value="">Select limit...</option>
                                    <option value="$1,000,000">$1,000,000</option>
                                    <option value="$2,000,000">$2,000,000</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Custom Limit (if other)</label>
                                <input type="text" placeholder="$____" name="hno_custom">
                            </div>
                        </div>
                    </div>

                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="trailer-interchange-cov">
                            <label for="trailer-interchange-cov"><strong>Trailer Interchange</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>TI Limit</label>
                                <select name="ti_limit">
                                    <option value="">Select limit...</option>
                                    <option value="$50,000">$50,000</option>
                                    <option value="$75,000">$75,000</option>
                                    <option value="$100,000">$100,000</option>
                                    <option value="$150,000">$150,000</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>TI Deductible</label>
                                <select name="ti_deductible">
                                    <option value="">Select deductible...</option>
                                    <option value="$1,000">$1,000</option>
                                    <option value="$2,500">$2,500</option>
                                    <option value="$5,000">$5,000</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Custom Limit (if other)</label>
                                <input type="text" placeholder="$____" name="ti_custom">
                            </div>
                        </div>
                    </div>

                    <div class="coverage-item">
                        <div class="checkbox-item">
                            <input type="checkbox" id="garagekeepers">
                            <label for="garagekeepers"><strong>Garagekeepers Liability</strong></label>
                        </div>
                        <div class="coverage-details">
                            <div class="form-group">
                                <label>GK Limit</label>
                                <select name="gk_limit">
                                    <option value="">Select limit...</option>
                                    <option value="$50,000">$50,000</option>
                                    <option value="$100,000">$100,000</option>
                                    <option value="$250,000">$250,000</option>
                                    <option value="$500,000">$500,000</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Custom Limit (if other)</label>
                                <input type="text" placeholder="$____" name="gk_custom">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üó∫Ô∏è 7. Operational Insights</h2>
            <div class="section-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Primary Operating Radius</label>
                        <select>
                            <option value="">Select...</option>
                            <option value="0-100">0-100 miles</option>
                            <option value="101-300">101-300 miles</option>
                            <option value="301-500">301-500 miles</option>
                            <option value="500+">500+ miles</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Zone-Rated Cities</label>
                        <input type="text" placeholder="List major metro areas">
                        <div class="notes">List major metros</div>
                    </div>
                    <div class="form-group">
                        <label>Annual Mileage (Past Year)</label>
                        <input type="text" placeholder="120,000 miles">
                        <div class="notes">Past vs. projected</div>
                    </div>
                    <div class="form-group">
                        <label>Projected Annual Mileage</label>
                        <input type="text" placeholder="125,000 miles">
                    </div>
                    <div class="form-group">
                        <label>Gross Revenue (Past Year)</label>
                        <input type="text" placeholder="$250,000">
                        <div class="notes">Past vs. projected</div>
                    </div>
                    <div class="form-group">
                        <label>Projected Gross Revenue</label>
                        <input type="text" placeholder="$275,000">
                    </div>
                </div>
            </div>
        </div>
        
        <button class="save-btn" onclick="saveQuote()">üíæ Save Quote & Generate Summary</button>
    </div>
    
    <!-- PDF Generation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <script>
        let driverCount = 1;
        let vehicleCount = 1;
        
        function addDriver() {
            driverCount++;
            const container = document.getElementById('drivers-container');
            const newDriver = document.createElement('div');
            newDriver.className = 'driver-entry';
            newDriver.setAttribute('data-driver', driverCount);
            
            newDriver.innerHTML = `
                <h3 style="color: #3498db; margin-bottom: 15px;">Driver #${driverCount}</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Driver Name <span class="required">*</span></label>
                        <input type="text" placeholder="Full name" name="driver_${driverCount}_name">
                    </div>
                    <div class="form-group">
                        <label>License State & Number <span class="required">*</span></label>
                        <input type="text" placeholder="CA - D1234567" name="driver_${driverCount}_license">
                    </div>
                    <div class="form-group">
                        <label>Date of Hire</label>
                        <input type="date" name="driver_${driverCount}_hire_date">
                    </div>
                    <div class="form-group">
                        <label>Years of Experience <span class="required">*</span></label>
                        <select name="driver_${driverCount}_experience">
                            <option value="">Select...</option>
                            <option value="<1">Less than 1 year</option>
                            <option value="1-3">1-3 years</option>
                            <option value="4-7">4-7 years</option>
                            <option value="8+">8+ years</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label>Accidents/Violations (Last 3 Years)</label>
                        <textarea rows="3" placeholder="Summary or attach loss runs" name="driver_${driverCount}_violations"></textarea>
                        <div class="notes">Summary or attach loss runs</div>
                    </div>
                </div>
                <button type="button" class="remove-btn" onclick="removeDriver(${driverCount})">Remove Driver #${driverCount}</button>
            `;
            
            container.appendChild(newDriver);
            updateRemoveButtons();
        }
        
        function removeDriver(driverNum) {
            const driverElement = document.querySelector(`[data-driver="${driverNum}"]`);
            if (driverElement) {
                driverElement.remove();
            }
            updateRemoveButtons();
        }
        
        function addVehicle() {
            vehicleCount++;
            const container = document.getElementById('vehicles-container');
            const newVehicle = document.createElement('div');
            newVehicle.className = 'vehicle-entry';
            newVehicle.setAttribute('data-vehicle', vehicleCount);
            
            newVehicle.innerHTML = `
                <h3 style="color: #3498db; margin-bottom: 15px;">Vehicle #${vehicleCount}</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Unit #</label>
                        <input type="text" placeholder="Internal reference number" name="vehicle_${vehicleCount}_unit">
                        <div class="notes">Internal reference</div>
                    </div>
                    <div class="form-group">
                        <label>Year/Make/Model <span class="required">*</span></label>
                        <input type="text" placeholder="2020 Freightliner Cascadia" name="vehicle_${vehicleCount}_make_model">
                    </div>
                    <div class="form-group">
                        <label>VIN <span class="required">*</span></label>
                        <input type="text" placeholder="17-digit VIN" name="vehicle_${vehicleCount}_vin">
                    </div>
                    <div class="form-group">
                        <label>GVW/GCW <span class="required">*</span></label>
                        <select name="vehicle_${vehicleCount}_gvw">
                            <option value=">80,000">More than 80,000 lbs</option>
                            <option value="60,001-80,000">60,001-80,000 lbs</option>
                            <option value="40,001-60,000">40,001-60,000 lbs</option>
                            <option value="26,001-40,000">26,001-40,000 lbs</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Radius of Operation <span class="required">*</span></label>
                        <select name="vehicle_${vehicleCount}_radius">
                            <option value="">Select...</option>
                            <option value="0-100">0-100 miles</option>
                            <option value="101-300">101-300 miles</option>
                            <option value="301-500">301-500 miles</option>
                            <option value="500+">500+ miles</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ELD Manufacturer</label>
                        <select name="vehicle_${vehicleCount}_eld">
                            <option value="">Select...</option>
                            <option value="KeepTruckin">KeepTruckin</option>
                            <option value="Samsara">Samsara</option>
                            <option value="Omnitracs">Omnitracs</option>
                            <option value="PeopleNet">PeopleNet</option>
                            <option value="Fleet Complete">Fleet Complete</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label>Additional Options</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="trailer-interchange-${vehicleCount}" name="vehicle_${vehicleCount}_trailer_interchange">
                                <label for="trailer-interchange-${vehicleCount}">Trailer Interchange Coverage</label>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" class="remove-btn" onclick="removeVehicle(${vehicleCount})">Remove Vehicle #${vehicleCount}</button>
            `;
            
            container.appendChild(newVehicle);
            updateRemoveButtons();
        }
        
        function removeVehicle(vehicleNum) {
            const vehicleElement = document.querySelector(`[data-vehicle="${vehicleNum}"]`);
            if (vehicleElement) {
                vehicleElement.remove();
            }
            updateRemoveButtons();
        }
        
        function updateRemoveButtons() {
            // Show/hide remove buttons based on count
            const driverEntries = document.querySelectorAll('.driver-entry');
            const vehicleEntries = document.querySelectorAll('.vehicle-entry');
            
            driverEntries.forEach((entry, index) => {
                const removeBtn = entry.querySelector('.remove-btn');
                if (removeBtn) {
                    removeBtn.style.display = driverEntries.length > 1 ? 'inline-block' : 'none';
                }
            });
            
            vehicleEntries.forEach((entry, index) => {
                const removeBtn = entry.querySelector('.remove-btn');
                if (removeBtn) {
                    removeBtn.style.display = vehicleEntries.length > 1 ? 'inline-block' : 'none';
                }
            });
        }
        function saveQuote() {
            // Validate all fields including dynamic entries
            if (!validateAllFields()) {
                return;
            }
            
            // Generate PDF and send email
            generatePDFAndSend();
        }
        
        function generatePDFAndSend() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Get form data
            const businessName = document.querySelector('input[placeholder="Legal name of insured"]').value || 'N/A';
            const contactName = document.querySelector('input[placeholder="Primary contact"]').value || 'N/A';
            const phone = document.querySelector('input[placeholder="(000) 000-0000"]').value || 'N/A';
            const email = document.querySelector('input[placeholder="email@company.com"]').value || 'N/A';
            const dotNumber = document.querySelector('input[placeholder="DOT Number"]').value || 'N/A';
            const mcNumber = document.querySelector('input[placeholder="MC Number"]').value || 'N/A';
            const agencyNumber = document.querySelector('input[placeholder="Agency reference number"]').value || 'N/A';
            const yearsInBusiness = document.querySelector('select').value || 'N/A';
            
            // PDF Header
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('TRUCKING INSURANCE QUICK QUOTE', 20, 20);
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text(`Generated: ${new Date().toLocaleDateString()}`, 150, 20);
            doc.text(`Agency #: ${agencyNumber}`, 150, 26);
            
            let yPos = 40;
            
            // Business Information Section
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('BUSINESS & REGULATORY INFORMATION', 20, yPos);
            yPos += 10;
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text(`Business Name: ${businessName}`, 20, yPos);
            yPos += 6;
            doc.text(`Contact Name: ${contactName}`, 20, yPos);
            yPos += 6;
            doc.text(`Phone: ${phone}`, 20, yPos);
            yPos += 6;
            doc.text(`Email: ${email}`, 20, yPos);
            yPos += 6;
            doc.text(`USDOT#: ${dotNumber}`, 20, yPos);
            yPos += 6;
            doc.text(`MC#: ${mcNumber}`, 20, yPos);
            yPos += 6;
            doc.text(`Agency Number: ${agencyNumber}`, 20, yPos);
            yPos += 6;
            doc.text(`Years in Business: ${yearsInBusiness}`, 20, yPos);
            yPos += 15;
            
            // Driver Information
            const driverEntries = document.querySelectorAll('.driver-entry');
            if (driverEntries.length > 0) {
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text('DRIVER INFORMATION', 20, yPos);
                yPos += 10;
                
                doc.setFontSize(10);
                doc.setFont(undefined, 'normal');
                
                driverEntries.forEach((entry, index) => {
                    const driverNum = entry.getAttribute('data-driver');
                    const driverName = entry.querySelector(`input[name="driver_${driverNum}_name"]`).value || 'N/A';
                    const licenseInfo = entry.querySelector(`input[name="driver_${driverNum}_license"]`).value || 'N/A';
                    const experience = entry.querySelector(`select[name="driver_${driverNum}_experience"]`).value || 'N/A';
                    
                    doc.text(`Driver #${index + 1}: ${driverName}`, 20, yPos);
                    yPos += 6;
                    doc.text(`License: ${licenseInfo}`, 25, yPos);
                    yPos += 6;
                    doc.text(`Experience: ${experience}`, 25, yPos);
                    yPos += 8;
                });
                yPos += 7;
            }

            // Vehicle Information
            const vehicleEntries = document.querySelectorAll('.vehicle-entry');
            if (vehicleEntries.length > 0) {
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text('VEHICLE & TRAILER DETAILS', 20, yPos);
                yPos += 10;
                
                doc.setFontSize(10);
                doc.setFont(undefined, 'normal');
                
                vehicleEntries.forEach((entry, index) => {
                    const vehicleNum = entry.getAttribute('data-vehicle');
                    const vehicleInfo = entry.querySelector(`input[name="vehicle_${vehicleNum}_make_model"]`).value || 'N/A';
                    const vin = entry.querySelector(`input[name="vehicle_${vehicleNum}_vin"]`).value || 'N/A';
                    const gvw = entry.querySelector(`select[name="vehicle_${vehicleNum}_gvw"]`).value || 'N/A';
                    
                    doc.text(`Vehicle #${index + 1}: ${vehicleInfo}`, 20, yPos);
                    yPos += 6;
                    doc.text(`VIN: ${vin}`, 25, yPos);
                    yPos += 6;
                    doc.text(`GVW: ${gvw}`, 25, yPos);
                    yPos += 8;
                });
                yPos += 7;
            }
            
            // Coverage Options
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('REQUESTED COVERAGE OPTIONS', 20, yPos);
            yPos += 10;
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            
            const coverageOptions = [
                {id: 'primary-liability', label: 'Primary Liability'},
                {id: 'non-trucking', label: 'Non-Trucking Liability'},
                {id: 'physical-damage', label: 'Physical Damage'},
                {id: 'cargo-coverage', label: 'Cargo Coverage'},
                {id: 'general-liability', label: 'General Liability'},
                {id: 'hired-non-owned', label: 'Hired/Non-Owned Auto'},
                {id: 'trailer-interchange-cov', label: 'Trailer Interchange'},
                {id: 'garagekeepers', label: 'Garagekeepers Liability'}
            ];
            
            coverageOptions.forEach(option => {
                const checkbox = document.getElementById(option.id);
                if (checkbox && checkbox.checked) {
                    doc.text(`‚úì ${option.label}`, 20, yPos);
                    yPos += 6;
                }
            });
            
            // Convert PDF to base64
            const pdfBase64 = doc.output('datauristring').split(',')[1];
            
            // Send email via Formspree (you'll need to set this up)
            sendEmailWithPDF(pdfBase64, {
                businessName,
                contactName,
                phone,
                email,
                dotNumber,
                mcNumber,
                agencyNumber
            });
        }
        
        function sendEmailWithPDF(pdfBase64, formData) {
            // Show loading message
            const btn = document.querySelector('.save-btn');
            const originalText = btn.textContent;
            btn.textContent = 'üìß Sending Quote...';
            btn.disabled = true;
            
            // Prepare form data for FormSubmit
            const emailData = new FormData();
            
            // FormSubmit specific fields
            emailData.append('_subject', `New Trucking Quote - ${formData.businessName} (Agency #${formData.agencyNumber})`);
            emailData.append('_cc', formData.email);
            emailData.append('_captcha', 'false');  // Disable captcha for cleaner UX
            emailData.append('_template', 'table');  // Use table format for better readability
            
            // Quote details
            emailData.append('Agency_Number', formData.agencyNumber);
            emailData.append('Business_Name', formData.businessName);
            emailData.append('Contact_Name', formData.contactName);
            emailData.append('Phone', formData.phone);
            emailData.append('Email', formData.email);
            emailData.append('DOT_Number', formData.dotNumber);
            emailData.append('MC_Number', formData.mcNumber);
            
            // Add all form fields including multiple drivers and vehicles
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                if (input.value && input.name) {
                    const fieldName = input.name || input.placeholder || input.id || 'field';
                    const cleanFieldName = fieldName.replace(/[^a-zA-Z0-9_]/g, '_');
                    
                    if (input.type === 'checkbox') {
                        emailData.append(cleanFieldName, input.checked ? 'Yes' : 'No');
                    } else {
                        emailData.append(cleanFieldName, input.value);
                    }
                }
            });
            
            // Add driver summary
            const driverEntries = document.querySelectorAll('.driver-entry');
            let driverSummary = [];
            driverEntries.forEach((entry, index) => {
                const driverNum = entry.getAttribute('data-driver');
                const driverName = entry.querySelector(`input[name="driver_${driverNum}_name"]`).value;
                if (driverName) {
                    driverSummary.push(`Driver ${index + 1}: ${driverName}`);
                }
            });
            emailData.append('Total_Drivers', driverEntries.length);
            emailData.append('Driver_Summary', driverSummary.join(', ') || 'None');
            
            // Add vehicle summary
            const vehicleEntries = document.querySelectorAll('.vehicle-entry');
            let vehicleSummary = [];
            vehicleEntries.forEach((entry, index) => {
                const vehicleNum = entry.getAttribute('data-vehicle');
                const vehicleInfo = entry.querySelector(`input[name="vehicle_${vehicleNum}_make_model"]`).value;
                if (vehicleInfo) {
                    vehicleSummary.push(`Vehicle ${index + 1}: ${vehicleInfo}`);
                }
            });
            emailData.append('Total_Vehicles', vehicleEntries.length);
            emailData.append('Vehicle_Summary', vehicleSummary.join(', ') || 'None');
            
            // Add coverage options
            const coverageOptions = [
                {id: 'primary-liability', label: 'Primary_Liability'},
                {id: 'non-trucking', label: 'Non_Trucking_Liability'},
                {id: 'physical-damage', label: 'Physical_Damage'},
                {id: 'cargo-coverage', label: 'Cargo_Coverage'},
                {id: 'general-liability', label: 'General_Liability'},
                {id: 'hired-non-owned', label: 'Hired_Non_Owned_Auto'},
                {id: 'trailer-interchange-cov', label: 'Trailer_Interchange'},
                {id: 'garagekeepers', label: 'Garagekeepers_Liability'}
            ];
            
            let selectedCoverage = [];
            coverageOptions.forEach(option => {
                const checkbox = document.getElementById(option.id);
                if (checkbox && checkbox.checked) {
                    selectedCoverage.push(option.label.replace('_', ' '));
                    emailData.append(option.label, 'Selected');
                }
            });
            
            emailData.append('Selected_Coverage_Summary', selectedCoverage.join(', ') || 'None selected');
            emailData.append('Quote_Date', new Date().toLocaleDateString());
            emailData.append('Quote_Time', new Date().toLocaleTimeString());
            
            // Create a blob from base64 and append as file
            const binaryString = atob(pdfBase64);
            const bytes = new Uint8Array(binaryString.length);
            for (let i = 0; i < binaryString.length; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            const pdfBlob = new Blob([bytes], { type: 'application/pdf' });
            emailData.append('attachment', pdfBlob, `TruckingQuote_${formData.businessName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`);
            
            // Send via FormSubmit
            fetch('https://formsubmit.co/ed.zahnle@truckerinsurance.com', {
                method: 'POST',
                body: emailData
            })
            .then(response => {
                if (response.ok) {
                    alert('‚úÖ Quote submitted successfully! You should receive the quote details via email shortly.');
                    // Reset form
                    document.querySelectorAll('input, select, textarea').forEach(field => {
                        if (field.type === 'checkbox') {
                            field.checked = false;
                        } else {
                            field.value = '';
                        }
                    });
                } else {
                    throw new Error('Network response was not ok');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('‚ùå There was an error submitting the quote. Please try again or contact support.');
            })
            .finally(() => {
                btn.textContent = originalText;
                btn.disabled = false;
            });
        }
        
        // Form validation
        document.addEventListener('DOMContentLoaded', function() {
            // Add required attributes to critical fields
            document.querySelector('input[placeholder="Legal name of insured"]').required = true;
            document.querySelector('input[placeholder="Primary contact"]').required = true;
            document.querySelector('input[placeholder="(000) 000-0000"]').required = true;
            document.querySelector('input[placeholder="email@company.com"]').required = true;
            document.querySelector('input[placeholder="DOT Number"]').required = true;
            document.querySelector('input[placeholder="MC Number"]').required = true;
            document.querySelector('input[placeholder="Agency reference number"]').required = true;
            
            updateRemoveButtons();
            
            // Real-time validation
            document.addEventListener('input', function(e) {
                if (e.target.required && !e.target.value) {
                    e.target.style.borderColor = '#e74c3c';
                } else if (e.target.value) {
                    e.target.style.borderColor = '#27ae60';
                }
            });
        });
        
        function validateAllFields() {
            let isValid = true;
            const requiredFields = document.querySelectorAll('input[required], select[required]');
            
            requiredFields.forEach(field => {
                if (!field.value) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#27ae60';
                }
            });
            
            // Validate at least one driver has required info
            const driverEntries = document.querySelectorAll('.driver-entry');
            let hasValidDriver = false;
            driverEntries.forEach(entry => {
                const driverNum = entry.getAttribute('data-driver');
                const driverName = entry.querySelector(`input[name="driver_${driverNum}_name"]`);
                const driverLicense = entry.querySelector(`input[name="driver_${driverNum}_license"]`);
                const driverExperience = entry.querySelector(`select[name="driver_${driverNum}_experience"]`);
                
                if (driverName.value && driverLicense.value && driverExperience.value) {
                    hasValidDriver = true;
                } else if (driverName.value || driverLicense.value || driverExperience.value) {
                    // Partial info - mark required fields
                    if (!driverName.value) driverName.style.borderColor = '#e74c3c';
                    if (!driverLicense.value) driverLicense.style.borderColor = '#e74c3c';
                    if (!driverExperience.value) driverExperience.style.borderColor = '#e74c3c';
                    isValid = false;
                }
            });
            
            // Validate at least one vehicle has required info
            const vehicleEntries = document.querySelectorAll('.vehicle-entry');
            let hasValidVehicle = false;
            vehicleEntries.forEach(entry => {
                const vehicleNum = entry.getAttribute('data-vehicle');
                const vehicleMake = entry.querySelector(`input[name="vehicle_${vehicleNum}_make_model"]`);
                const vehicleVin = entry.querySelector(`input[name="vehicle_${vehicleNum}_vin"]`);
                const vehicleRadius = entry.querySelector(`select[name="vehicle_${vehicleNum}_radius"]`);
                
                if (vehicleMake.value && vehicleVin.value && vehicleRadius.value) {
                    hasValidVehicle = true;
                } else if (vehicleMake.value || vehicleVin.value || vehicleRadius.value) {
                    // Partial info - mark required fields
                    if (!vehicleMake.value) vehicleMake.style.borderColor = '#e74c3c';
                    if (!vehicleVin.value) vehicleVin.style.borderColor = '#e74c3c';
                    if (!vehicleRadius.value) vehicleRadius.style.borderColor = '#e74c3c';
                    isValid = false;
                }
            });
            
            if (!hasValidDriver) {
                alert('Please complete at least one driver with all required information.');
                isValid = false;
            }
            
            if (!hasValidVehicle) {
                alert('Please complete at least one vehicle with all required information.');
                isValid = false;
            }
            
            return isValid;
        }
    </script>
</body>
</html>
