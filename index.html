<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trucking Insurance Quote Page</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .section {
            border-bottom: 3px solid #e9ecef;
            padding: 0;
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        .section-header {
            background: #f1f3f4;
            padding: 15px 20px;
            border-left: 4px solid #3498db;
            margin: 0;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-content {
            padding: 20px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        label {
            font-weight: 600;
            color: #495057;
            font-size: 14px;
        }
        
        input, select, textarea {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin: 0;
            transform: scale(1.2);
        }
        
        .coverage-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .coverage-item {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            background: #f8f9fa;
            transition: all 0.2s;
        }
        
        .coverage-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .notes {
            font-size: 12px;
            color: #6c757d;
            font-style: italic;
            margin-top: 5px;
        }
        
        .save-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px;
            transition: transform 0.2s;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
        }
        
        .remove-btn {
            background: #e74c3c;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            margin-top: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .remove-btn:hover {
            background: #c0392b;
        }
        
        .add-btn {
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            margin-top: 15px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .add-btn:hover {
            background: #219a52;
        }
        
        .driver-entry, .vehicle-entry {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f8f9fa;
        }
        
        .commodity-entry {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f8f9fa;
        }
        
        .commodity-entry:first-child {
            background: white;
        }
        
        #percentage-total {
            padding: 10px 15px;
            background: #f0f8ff;
            border-radius: 5px;
            border: 2px solid #e9ecef;
        }
        
        #percentage-total.over-100 {
            background: #ffe6e6;
            border-color: #e74c3c;
            color: #e74c3c;
        }
        
        #percentage-total.complete {
            background: #e8f5e8;
            border-color: #27ae60;
            color: #27ae60;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .dashboard-section {
            background: #e8f5e8;
            border-left: 4px solid #27ae60;
            margin: 15px 0;
            padding: 15px;
            border-radius: 6px;
        }
        
        .auto-generated {
            background: #f0f8ff;
            border: 1px solid #3498db;
            color: #2c3e50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="text-align: center; margin-bottom: 10px;">
                <h1 style="margin: 0; font-size: 28px; color: white;">Network TruckInsurance Services, Inc.</h1>
                <div style="font-size: 16px; margin-top: 5px; opacity: 0.9;">
                    <strong>Ed Zahnle - Agent/Broker</strong>
                </div>
                <div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">
                    üìû PH (509) 215-3433 | üìß ed.zahnle@truckerinsurance.com
                </div>
            </div>
            <div style="border-top: 2px solid rgba(255,255,255,0.3); padding-top: 15px; margin-top: 15px;">
                <h2 style="margin: 0; font-size: 20px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    üìã Professional Quote Page üíº
                </h2>
                <div style="font-size: 14px; margin-top: 8px; opacity: 0.9; text-align: center;">
                    Generate clean PDFs for underwriter submissions
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üìã 1. Business Information</h2>
            <div class="section-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Business Name <span class="required">*</span></label>
                        <input type="text" id="business-name" placeholder="Legal name of insured">
                        <div class="notes">Legal name of insured</div>
                    </div>
                    <div class="form-group">
                        <label>Contact Name <span class="required">*</span></label>
                        <input type="text" id="contact-name" placeholder="Primary contact">
                    </div>
                    <div class="form-group">
                        <label>Phone Number <span class="required">*</span></label>
                        <input type="tel" id="phone" placeholder="(000) 000-0000">
                    </div>
                    <div class="form-group">
                        <label>Email Address <span class="required">*</span></label>
                        <input type="email" id="email" placeholder="email@company.com">
                    </div>
                    <div class="form-group full-width">
                        <label>Business Address <span class="required">*</span></label>
                        <input type="text" placeholder="Street Address" name="business_address" style="margin-bottom: 8px;">
                        <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 8px;">
                            <input type="text" placeholder="City" name="business_city">
                            <input type="text" placeholder="State" name="business_state" id="business-state">
                            <input type="text" placeholder="ZIP Code" name="business_zip">
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <div class="checkbox-group" style="margin-bottom: 10px;">
                            <div class="checkbox-item">
                                <input type="checkbox" id="same-garage-address" onchange="toggleGarageAddress()">
                                <label for="same-garage-address">Garage address same as business address</label>
                            </div>
                        </div>
                        <div id="garage-address-section">
                            <label>Garage Address (where vehicles are kept) <span class="required">*</span></label>
                            <input type="text" placeholder="Street Address" name="garage_address" style="margin-bottom: 8px;">
                            <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 8px;">
                                <input type="text" placeholder="City" name="garage_city">
                                <input type="text" placeholder="State" name="garage_state">
                                <input type="text" placeholder="ZIP Code" name="garage_zip">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>USDOT# <span class="required">*</span></label>
                        <input type="text" placeholder="DOT Number">
                    </div>
                    <div class="form-group">
                        <label>MC# <span class="required">*</span></label>
                        <input type="text" placeholder="MC Number">
                    </div>
                    <div class="form-group">
                        <label>FEIN</label>
                        <input type="text" placeholder="Federal EIN">
                    </div>
                    <div class="form-group">
                        <label>State Permit#</label>
                        <input type="text" placeholder="State permit number">
                    </div>
                    <div class="form-group">
                        <label>Agency Number <span class="required">*</span></label>
                        <input type="text" id="agency-number" placeholder="Agency reference number">
                        <div class="notes">Internal agency tracking number</div>
                    </div>
                    <div class="form-group">
                        <label>Years in Business <span class="required">*</span></label>
                        <select>
                            <option value="">Select...</option>
                            <option value="<1">Less than 1 year</option>
                            <option value="1-3">1-3 years</option>
                            <option value="4-7">4-7 years</option>
                            <option value="8+">8+ years</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üë®‚Äçüíº 2. Driver Information</h2>
            <div class="section-content">
                <div id="drivers-container">
                    <div class="driver-entry" data-driver="1">
                        <h3 style="color: #3498db; margin-bottom: 15px;">Driver #1</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Driver Name <span class="required">*</span></label>
                                <input type="text" placeholder="Full name" name="driver_1_name">
                            </div>
                            <div class="form-group">
                                <label>Date of Birth <span class="required">*</span></label>
                                <input type="date" name="driver_1_birth_date">
                            </div>
                            <div class="form-group">
                                <label>License State & Number <span class="required">*</span></label>
                                <input type="text" placeholder="CA - D1234567" name="driver_1_license">
                            </div>
                            <div class="form-group">
                                <label>Date of Hire</label>
                                <input type="date" name="driver_1_hire_date">
                            </div>
                            <div class="form-group">
                                <label>Years of Experience <span class="required">*</span></label>
                                <select name="driver_1_experience">
                                    <option value="">Select...</option>
                                    <option value="<1">Less than 1 year</option>
                                    <option value="1-3">1-3 years</option>
                                    <option value="4-7">4-7 years</option>
                                    <option value="8+">8+ years</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label>Accidents/Violations (Last 3 Years)</label>
                                <textarea rows="3" placeholder="Summary or attach loss runs" name="driver_1_violations"></textarea>
                                <div class="notes">Summary or attach loss runs</div>
                            </div>
                        </div>
                        <button type="button" class="remove-btn" onclick="removeDriver(1)" style="display: none;">Remove Driver #1</button>
                    </div>
                </div>
                <button type="button" onclick="addDriver()" class="add-btn">+ Add Another Driver</button>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üöö 3. Vehicle & Trailer Details</h2>
            <div class="section-content">
                <div id="vehicles-container">
                    <div class="vehicle-entry" data-vehicle="1">
                        <h3 style="color: #3498db; margin-bottom: 15px;">Vehicle #1</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Unit #</label>
                                <input type="text" placeholder="Internal reference number" name="vehicle_1_unit">
                                <div class="notes">Internal reference</div>
                            </div>
                            <div class="form-group">
                                <label>Year/Make/Model <span class="required">*</span></label>
                                <input type="text" placeholder="2020 Freightliner Cascadia" name="vehicle_1_make_model">
                            </div>
                            <div class="form-group">
                                <label>VIN <span class="required">*</span></label>
                                <input type="text" placeholder="17-digit VIN" name="vehicle_1_vin">
                            </div>
                            <div class="form-group">
                                <label>GVW/GCW <span class="required">*</span></label>
                                <select name="vehicle_1_gvw">
                                    <option value=">80,000">More than 80,000 lbs</option>
                                    <option value="60,001-80,000">60,001-80,000 lbs</option>
                                    <option value="40,001-60,000">40,001-60,000 lbs</option>
                                    <option value="26,001-40,000">26,001-40,000 lbs</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Radius of Operation <span class="required">*</span></label>
                                <select name="vehicle_1_radius" onchange="updateFleetSummary()">
                                    <option value="">Select...</option>
                                    <option value="0-100">0-100 miles</option>
                                    <option value="101-300">101-300 miles</option>
                                    <option value="301-500">301-500 miles</option>
                                    <option value="500+">500+ miles</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ELD Manufacturer</label>
                                <select name="vehicle_1_eld">
                                    <option value="">Select...</option>
                                    <option value="KeepTruckin">KeepTruckin</option>
                                    <option value="Samsara">Samsara</option>
                                    <option value="Omnitracs">Omnitracs</option>
                                    <option value="PeopleNet">PeopleNet</option>
                                    <option value="Fleet Complete">Fleet Complete</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Vehicle Value <span class="required">*</span></label>
                                <input type="text" placeholder="$85,000" name="vehicle_1_value">
                                <div class="notes">Replacement cost value for physical damage coverage</div>
                            </div>
                            <div class="form-group full-width">
                                <label>Additional Options</label>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="trailer-interchange-1" name="vehicle_1_trailer_interchange">
                                        <label for="trailer-interchange-1">Trailer Interchange Coverage</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="remove-btn" onclick="removeVehicle(1)" style="display: none;">Remove Vehicle #1</button>
                    </div>
                </div>
                <button type="button" onclick="addVehicle()" class="add-btn">+ Add Another Vehicle</button>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-header">üì¶ 5. Commodities & Cargo</h2>
            <div class="section-content">
                <div id="commodities-container">
                    <div class="commodity-entry" data-commodity="1">
                        <h3 style="color: #3498db; margin-bottom: 15px;">Commodity #1</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Commodity Type <span class="required">*</span></label>
                                <select name="commodity_1_type">
                                    <option value="">Select...</option>
                                    <option value="General Freight">General Freight</option>
                                    <option value="Auto Hauler">Auto Hauler</option>
                                    <option value="Refrigerated">Refrigerated</option>
                                    <option value="Flatbed">Flatbed</option>
                                    <option value="Hazmat">Hazmat</option>
                                    <option value="Tanker">Tanker</option>
                                    <option value="Heavy Haul">Heavy Haul</option>
                                    <option value="Container">Container</option>
                                    <option value="Dry Van">Dry Van</option>
                                    <option value="Step Deck">Step Deck</option>
                                    <option value="Lowboy">Lowboy</option>
                                    <option value="Livestock">Livestock</option>
                                    <option value="Grain/Agriculture">Grain/Agriculture</option>
                                    <option value="Construction Materials">Construction Materials</option>
                                    <option value="Food Grade">Food Grade</option>
                                    <option value="Other">Other (specify below)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>% of Total Loads <span class="required">*</span></label>
                                <input type="number" placeholder="e.g., 60" min="1" max="100" name="commodity_1_percentage">
                                <div class="notes">Percentage of total loads</div>
                            </div>
                            <div class="form-group">
                                <label>Average Cargo Value</label>
                                <input type="text" placeholder="$50,000" name="commodity_1_avg_value">
                            </div>
                            <div class="form-group">
                                <label>Maximum Cargo Value</label>
                                <input type="text" placeholder="$100,000" name="commodity_1_max_value">
                            </div>
                            <div class="form-group full-width">
                                <label>Custom Commodity (if other)</label>
                                <input type="text" placeholder="Specify if 'Other' selected above" name="commodity_1_custom">
                            </div>
                            <div class="form-group full-width">
                                <label>Additional Notes</label>
                                <textarea rows="2" placeholder="Special handling, equipment requirements, etc." name="commodity_1_notes"></textarea>
                            </div>
                        </div>
                        <button type="button" class="remove-btn" onclick="removeCommodity(1)" style="display: none;">Remove Commodity #1</button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                    <button type="button" onclick="addCommodity()" class="add-btn">+ Add Another Commodity</button>
                    <div id="percentage-total" style="font-weight: bold; color: #3498db; font-size: 16px;">Total: 0%</div>
                </div>
            </div>
        </div>
        
        <!-- Continue with existing sections... -->
        
        <button class="save-btn" onclick="saveQuote()">üíæ Save Quote & Generate PDF</button>
    </div>
    
    <script>
        let driverCount = 1;
        let vehicleCount = 1;
        let commodityCount = 1;
        let quoteCounter = 1;
        
        // Auto-generate quote ID and date on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateRemoveButtons();
            setupCoverageToggles();
            setupPercentageCalculation();
            
            // Setup real-time updates
            document.addEventListener('change', function(e) {
                if (e.target.name && e.target.name.includes('vehicle_') && e.target.name.includes('_radius')) {
                    // Vehicle radius changed - no action needed for clean PDF form
                }
            });
        });
        
        function setupCoverageToggles() {
            // Setup coverage detail visibility
            const coverageCheckboxes = document.querySelectorAll('.coverage-item input[type="checkbox"]');
            
            coverageCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const coverageItem = this.closest('.coverage-item');
                    const coverageDetails = coverageItem.querySelector('.coverage-details');
                    
                    if (this.checked) {
                        coverageDetails.style.display = 'grid';
                        coverageItem.style.borderColor = '#3498db';
                        coverageItem.style.background = '#f0f8ff';
                    } else {
                        coverageDetails.style.display = 'none';
                        coverageItem.style.borderColor = '#e9ecef';
                        coverageItem.style.background = '#f8f9fa';
                        
                        // Clear values when unchecked
                        const inputs = coverageDetails.querySelectorAll('input, select');
                        inputs.forEach(input => input.value = '');
                    }
                });
            });
        }
        
        function setupPercentageCalculation() {
            // Setup percentage calculation for existing and new inputs
            document.addEventListener('input', function(e) {
                if (e.target.name && e.target.name.includes('commodity_') && e.target.name.includes('_percentage')) {
                    updatePercentageTotal();
                }
            });
            updatePercentageTotal();
        }
        
        function addDriver() {
            driverCount++;
            const container = document.getElementById('drivers-container');
            const newDriver = document.createElement('div');
            newDriver.className = 'driver-entry';
            newDriver.setAttribute('data-driver', driverCount);
            
            newDriver.innerHTML = `
                <h3 style="color: #3498db; margin-bottom: 15px;">Driver #${driverCount}</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Driver Name <span class="required">*</span></label>
                        <input type="text" placeholder="Full name" name="driver_${driverCount}_name">
                    </div>
                    <div class="form-group">
                        <label>Date of Birth <span class="required">*</span></label>
                        <input type="date" name="driver_${driverCount}_birth_date">
                    </div>
                    <div class="form-group">
                        <label>License State & Number <span class="required">*</span></label>
                        <input type="text" placeholder="CA - D1234567" name="driver_${driverCount}_license">
                    </div>
                    <div class="form-group">
                        <label>Date of Hire</label>
                        <input type="date" name="driver_${driverCount}_hire_date">
                    </div>
                    <div class="form-group">
                        <label>Years of Experience <span class="required">*</span></label>
                        <select name="driver_${driverCount}_experience">
                            <option value="">Select...</option>
                            <option value="<1">Less than 1 year</option>
                            <option value="1-3">1-3 years</option>
                            <option value="4-7">4-7 years</option>
                            <option value="8+">8+ years</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label>Accidents/Violations (Last 3 Years)</label>
                        <textarea rows="3" placeholder="Summary or attach loss runs" name="driver_${driverCount}_violations"></textarea>
                        <div class="notes">Summary or attach loss runs</div>
                    </div>
                </div>
                <button type="button" class="remove-btn" onclick="removeDriver(${driverCount})">Remove Driver #${driverCount}</button>
            `;
            
            container.appendChild(newDriver);
            updateRemoveButtons();
        }
        
        function removeDriver(driverNum) {
            const driverElement = document.querySelector(`[data-driver="${driverNum}"]`);
            if (driverElement) {
                driverElement.remove();
            }
            updateRemoveButtons();
        }
        
        function addVehicle() {
            vehicleCount++;
            const container = document.getElementById('vehicles-container');
            const newVehicle = document.createElement('div');
            newVehicle.className = 'vehicle-entry';
            newVehicle.setAttribute('data-vehicle', vehicleCount);
            
            newVehicle.innerHTML = `
                <h3 style="color: #3498db; margin-bottom: 15px;">Vehicle #${vehicleCount}</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Unit #</label>
                        <input type="text" placeholder="Internal reference number" name="vehicle_${vehicleCount}_unit">
                        <div class="notes">Internal reference</div>
                    </div>
                    <div class="form-group">
                        <label>Year/Make/Model <span class="required">*</span></label>
                        <input type="text" placeholder="2020 Freightliner Cascadia" name="vehicle_${vehicleCount}_make_model">
                    </div>
                    <div class="form-group">
                        <label>VIN <span class="required">*</span></label>
                        <input type="text" placeholder="17-digit VIN" name="vehicle_${vehicleCount}_vin">
                    </div>
                    <div class="form-group">
                        <label>GVW/GCW <span class="required">*</span></label>
                        <select name="vehicle_${vehicleCount}_gvw">
                            <option value=">80,000">More than 80,000 lbs</option>
                            <option value="60,001-80,000">60,001-80,000 lbs</option>
                            <option value="40,001-60,000">40,001-60,000 lbs</option>
                            <option value="26,001-40,000">26,001-40,000 lbs</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Radius of Operation <span class="required">*</span></label>
                        <select name="vehicle_${vehicleCount}_radius">
                            <option value="">Select...</option>
                            <option value="0-100">0-100 miles</option>
                            <option value="101-300">101-300 miles</option>
                            <option value="301-500">301-500 miles</option>
                            <option value="500+">500+ miles</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ELD Manufacturer</label>
                        <select name="vehicle_${vehicleCount}_eld">
                            <option value="">Select...</option>
                            <option value="KeepTruckin">KeepTruckin</option>
                            <option value="Samsara">Samsara</option>
                            <option value="Omnitracs">Omnitracs</option>
                            <option value="PeopleNet">PeopleNet</option>
                            <option value="Fleet Complete">Fleet Complete</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Vehicle Value <span class="required">*</span></label>
                        <input type="text" placeholder="$85,000" name="vehicle_${vehicleCount}_value">
                        <div class="notes">Replacement cost value for physical damage coverage</div>
                    </div>
                    <div class="form-group full-width">
                        <label>Additional Options</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="trailer-interchange-${vehicleCount}" name="vehicle_${vehicleCount}_trailer_interchange">
                                <label for="trailer-interchange-${vehicleCount}">Trailer Interchange Coverage</label>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" class="remove-btn" onclick="removeVehicle(${vehicleCount})">Remove Vehicle #${vehicleCount}</button>
            `;
            
            container.appendChild(newVehicle);
            updateRemoveButtons();
        }
        
        function removeVehicle(vehicleNum) {
            const vehicleElement = document.querySelector(`[data-vehicle="${vehicleNum}"]`);
            if (vehicleElement) {
                vehicleElement.remove();
            }
            updateRemoveButtons();
        }
        
        function addCommodity() {
            commodityCount++;
            const container = document.getElementById('commodities-container');
            const newCommodity = document.createElement('div');
            newCommodity.className = 'commodity-entry';
            newCommodity.setAttribute('data-commodity', commodityCount);
            
            newCommodity.innerHTML = `
                <h3 style="color: #3498db; margin-bottom: 15px;">Commodity #${commodityCount}</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Commodity Type <span class="required">*</span></label>
                        <select name="commodity_${commodityCount}_type">
                            <option value="">Select...</option>
                            <option value="General Freight">General Freight</option>
                            <option value="Auto Hauler">Auto Hauler</option>
                            <option value="Refrigerated">Refrigerated</option>
                            <option value="Flatbed">Flatbed</option>
                            <option value="Hazmat">Hazmat</option>
                            <option value="Tanker">Tanker</option>
                            <option value="Heavy Haul">Heavy Haul</option>
                            <option value="Container">Container</option>
                            <option value="Dry Van">Dry Van</option>
                            <option value="Step Deck">Step Deck</option>
                            <option value="Lowboy">Lowboy</option>
                            <option value="Livestock">Livestock</option>
                            <option value="Grain/Agriculture">Grain/Agriculture</option>
                            <option value="Construction Materials">Construction Materials</option>
                            <option value="Food Grade">Food Grade</option>
                            <option value="Other">Other (specify below)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>% of Total Loads <span class="required">*</span></label>
                        <input type="number" placeholder="e.g., 25" min="1" max="100" name="commodity_${commodityCount}_percentage">
                        <div class="notes">Percentage of total loads</div>
                    </div>
                    <div class="form-group">
                        <label>Average Cargo Value</label>
                        <input type="text" placeholder="$50,000" name="commodity_${commodityCount}_avg_value">
                    </div>
                    <div class="form-group">
                        <label>Maximum Cargo Value</label>
                        <input type="text" placeholder="$100,000" name="commodity_${commodityCount}_max_value">
                    </div>
                    <div class="form-group full-width">
                        <label>Custom Commodity (if other)</label>
                        <input type="text" placeholder="Specify if 'Other' selected above" name="commodity_${commodityCount}_custom">
                    </div>
                    <div class="form-group full-width">
                        <label>Additional Notes</label>
                        <textarea rows="2" placeholder="Special handling, equipment requirements, etc." name="commodity_${commodityCount}_notes"></textarea>
                    </div>
                </div>
                <button type="button" class="remove-btn" onclick="removeCommodity(${commodityCount})">Remove Commodity #${commodityCount}</button>
            `;
            
            container.appendChild(newCommodity);
            updateRemoveButtons();
        }
        
        function removeCommodity(commodityNum) {
            const commodityElement = document.querySelector(`[data-commodity="${commodityNum}"]`);
            if (commodityElement) {
                commodityElement.remove();
            }
            updateRemoveButtons();
            updatePercentageTotal();
        }
        
        function updatePercentageTotal() {
            const percentageInputs = document.querySelectorAll('input[name*="commodity_"][name*="_percentage"]');
            let total = 0;
            
            percentageInputs.forEach(input => {
                const value = parseInt(input.value) || 0;
                total += value;
            });
            
            const totalDisplay = document.getElementById('percentage-total');
            totalDisplay.textContent = `Total: ${total}%`;
            
            // Update styling based on total
            totalDisplay.classList.remove('over-100', 'complete');
            if (total > 100) {
                totalDisplay.classList.add('over-100');
            } else if (total === 100) {
                totalDisplay.classList.add('complete');
            }
        }
        
        function updateRemoveButtons() {
            // Show/hide remove buttons based on count
            const driverEntries = document.querySelectorAll('.driver-entry');
            const vehicleEntries = document.querySelectorAll('.vehicle-entry');
            const commodityEntries = document.querySelectorAll('.commodity-entry');
            
            driverEntries.forEach((entry, index) => {
                const removeBtn = entry.querySelector('.remove-btn');
                if (removeBtn) {
                    removeBtn.style.display = driverEntries.length > 1 ? 'inline-block' : 'none';
                }
            });
            
            vehicleEntries.forEach((entry, index) => {
                const removeBtn = entry.querySelector('.remove-btn');
                if (removeBtn) {
                    removeBtn.style.display = vehicleEntries.length > 1 ? 'inline-block' : 'none';
                }
            });
            
            commodityEntries.forEach((entry, index) => {
                const removeBtn = entry.querySelector('.remove-btn');
                if (removeBtn) {
                    removeBtn.style.display = commodityEntries.length > 1 ? 'inline-block' : 'none';
                }
            });
        }
        
        function toggleGarageAddress() {
            const checkbox = document.getElementById('same-garage-address');
            const garageSection = document.getElementById('garage-address-section');
            
            if (checkbox.checked) {
                garageSection.style.display = 'none';
                
                // Copy business address to garage address fields
                const businessAddress = document.querySelector('input[name="business_address"]').value;
                const businessCity = document.querySelector('input[name="business_city"]').value;
                const businessState = document.querySelector('input[name="business_state"]').value;
                const businessZip = document.querySelector('input[name="business_zip"]').value;
                
                document.querySelector('input[name="garage_address"]').value = businessAddress;
                document.querySelector('input[name="garage_city"]').value = businessCity;
                document.querySelector('input[name="garage_state"]').value = businessState;
                document.querySelector('input[name="garage_zip"]').value = businessZip;
            } else {
                garageSection.style.display = 'block';
            }
        }
        
        function saveQuote() {
            // Validate required fields for professional PDF generation
            if (!validateAllFields()) {
                return;
            }
            
            // Generate PDF and send email
            generatePDFAndSend();
        }
        
        // Setup event listeners for real-time updates
        document.addEventListener('input', function(e) {
            if (e.target.name && e.target.name.includes('commodity_') && e.target.name.includes('_percentage')) {
                updatePercentageTotal();
            }
        });
    </script>
</body>
</html>
